# 服务器推送

### 短轮询

- 浏览器每隔一段时间向浏览器发送 http 请求，服务器端在收到请求后，不论是否有数据更新，都直接进行 响应。

- 这种方式实现的即时通信，本质上还是浏览器发送请求，服务器接受请求的一个过程，通过让客户端不断的进行请求，使得客户端能够模拟实时地收到服务器端的数据的变化。 

优点

- 比较简单,实现容易。

缺点

- 需要不断进行请求,浪费服务器端和客户端资源,加大服务器端压力。

### 长轮询

- 首先由客户端向服务器发起请求，当服务器收到客户端发来的请求后，服务器端不会直接进行响应，而是先将 这个请求挂起，然后判断服务器端数据是否有更新。如果有更新则进行相应，如果一直没有数据，则到一定时间限制才返回。客户端处理返回的信息后，再次发出请求，重新建立连接。

优点

- 长轮询和短轮询比起来，它的优点是**明显减少了很多不必要的 http 请求次数**，相比之下节约了资源。

缺点

- 连接挂起也会导致资源的浪费。

### WebSocket

- WebSocket 是 Html5 定义的一个新协议，该协议允许由服务器主动的向客户端推送信息。
- WebSocket 只需要一次HTTP握手，服务器就能一直与客户端保持通信，直到关闭连接，这样就解决了服务器需要反复解析 HTTP 协议，减少了资源的开销。

优点：
- 全双工协议，支持双向通信，实时性更强。也就是通信双方是平等的，可以相互发送消息。
- 支持跨域。
- 减少通信量：只要建立起WebSocket连接，就希望一直保持连接状态。和HTTP相比，不但每次连接时的总开销减少，而且由于WebSocket的首部信息很小，通信量也相应减少了。**在海量并发和客户端与服务器交互负载流量大的情况下，极大的节省了网络带宽资源的消耗，有明显的性能优势，且客户端发送和接受消息是在同一个持久连接上发起，实时性优势明显**。

缺点

- WebSocket是一个新的协议，需要服务器端支持，服务器端配置比较复杂。

### SSE

- 服务器端到客户端(浏览器)的单项消息推送，只能服务器向浏览器端发送。

优点

- 部署在 HTTP协议之上的，现有的服务器软件都支持。

缺点

- 网站需支持Http2.0。

- 不支持跨域。

  [Web 实时推送技术的总结](https://github.com/ljianshu/Blog/issues/58)