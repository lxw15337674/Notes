# CSRF
CSRF即Cross-site request forgery(跨站请求伪造)。即攻击者借助受害者的Cookie，伪装为受害者，进行权限保护之下的操作。

利用用户的登录态发起恶意请求。

满足条件：用户已经登录。

假如黑客在自己的站点上放置了其他网站的外链，例如"www.weibo.com/api"，默认情况下，浏览器会带着weibo.com的cookie访问这个网址，如果用户已登录过该网站且网站没有对CSRF攻击进行防御，那么服务器就会认为是用户本人在调用此接口并执行相关操作，致使账号被劫持。

## 攻击方式
- 自动GET请求。
- 自动POST请求。
- 诱导点击发送GET请求。

## 防范措施
1、使用CSRF Token进行验证，首先，浏览器向服务器发送请求时，服务器生成一个字符串，将其植入到返回的页面中。
然后浏览器如果要发送请求，就必须带上这个字符串，然后服务器来验证是否合法，如果不合法则不予响应。这个字符串也就是CSRF Token，通常第三方站点无法拿到这个 token, 因此也就是被服务器给拒绝。

2、验证来源站点：通过请求头的Origin和Referer，其中，Origin只包含域名信息，而Referer包含了具体的 URL 路径。来确定请求是否是合法的源。但都可以伪造。

3、设置SameSite,可以对 Cookie 设置 SameSite 属性。该属性表示 Cookie不随着跨域请求发送，但浏览器兼容不一。


![image](https://segmentfault.com/img/remote/1460000012693783?w=904&h=739)