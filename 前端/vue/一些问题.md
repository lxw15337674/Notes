# 一些问题
## Vue是如何检测数组变化？
- 使用函数劫持的方法，重写了数组的方法。
- vue将data中的数组，进行了原型链重写，只想了自己定义的数组原型方法，每次调用api时，都会通知依赖更新。

## 为何Vue采用异步渲染？
如果不采用异步更新，每次更新数据都会对当前组件进行重新渲染，为了性能考虑，vue会在本次数据更新结束后，再去异步更新视图。

## nextTick实现原理
利用宏任务和微任务，让方法异步执行。

## computed和watch的差异
computed和watch都是watcher
1. computed是是基于它们的响应式依赖进行缓存的，只有当依赖的属性发生变化时才会重新求值。
适用于计算比较消耗性能的计算场景。当表达式过于复杂时，在模板中放入过多逻辑会让模板难以维护，可以将复杂的逻辑放入计算属性中处理。
2. method每次都要重新执行，每次触发重新渲染时，方法都会再次执行。
3. watch用来监听数据的变化，执行对应的方法。

## watch中的deep:true是如何实现的
当指定deep为true时，如果当前监控的值是数组类型，就会对对象中的每一项进行求值，此时会将当前watcher存入对应属性的依赖中，这样数组中对象发生变化也会通知数据更新。

## 在哪个生命周期内调用异步请求
可以在钩子函数 created、beforeMount、mounted 中进行调用，因为在这三个钩子函数中，data 已经创建，可以将服务端端返回的数据进行赋值。

在 created 钩子函数中调用异步请求优点：

- 能更快获取到服务端数据，减少页面loading 时间；
- ssr不支持 beforeMount 、mounted 钩子函数，所以放在 created 中有助于一致性；
> created时，无法操作DOM节点，无法找到相关的元素

## 何时需要使用`beforeDestory`
- 使用$on方法
- 清除定时器
- 解除事件绑定

## Vue 模板编译原理
将模板转为ast（抽象语法树），作为虚拟DOM。

## v-if和v-show
- 当条件不成立时，v-if不会渲染DOM元素。
- v-show操作的是样式(display)，切换当前DOM的显示和隐藏。

## v-for与v-if为什么不能连用
v-for优先级高，连用会把v-if给各个元素都添加一下，造成性能问题。

## vnode来描述一个DOM结构
vnode 是作为数据和视图的一种映射关系

```
<div id='container'><p></p></div>

let obj = {
    tag:'div',
    data:{
        id:'container'
    }
    children:[
        {tag:'p',
        data:{},
        chidlren:[]
        }

    ]
}

```

## 为什么vue组件中data必须是一个函数？

对象为引用类型，当复用组件时，由于数据对象都指向同一个data对象，当在一个组件中修改data时，其他重用的组件中的data会同时被修改；而使用返回对象的函数，由于每次返回的都是一个新对象（Object的实例），引用地址不同，则不会出现这个问题。

## v-for key的作用

当Vue用 v-for 正在更新已渲染过的元素列表是，它默认用“就地复用”策略。如果数据项的顺序被改变，Vue将不是移动DOM元素来匹配数据项的改变，而是简单复用此处每个元素，并且确保它在特定索引下显示已被渲染过的每个元素。

为了给Vue一个提示，以便它能跟踪每个节点的身份，从而重用和重新排序现有元素，你需要为每项提供一个唯一 key 属性。key属性的类型只能为 string或者number类型。

key 的特殊属性主要用在Vue的虚拟DOM算法，在新旧nodes对比时辨识VNodes。如果不使用 key，Vue会使用一种最大限度减少动态元素并且尽可能的尝试修复/再利用相同类型元素的算法。使用key，它会基于key的变化重新排列元素顺序，并且会移除 key 不存在的元素。


## vue为什么要求组件模板只能有一个根元素
组件的template最终会转换成VNode对象，一个组件对应一个根元素对应一个VNode对象




## 其他

[30 道 Vue 面试题，自测Vue掌握程度 | 内含详细讲解](
https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649826217&idx=2&sn=00df0bee9bb97b803fc78a8cca81e3b0&chksm=f175e96ac602607cd3781ef095ae0635561cb3e2f34e04a296654dd64fc1c81a442cc97087ba&scene=21#wechat_redirect)